想要深入了解Go语言的编译过程，需要提前了解一下编译过程中涉及的一些术语和专业知识。这些知识其实在我们的日常工作和学习中比较难用到，但是对于理解编译的过程和原理还是非常重要的。
1) 抽象语法树

象语法树（AST）是源代码语法的结构的一种抽象表示，它用树状的方式表示编程语言的语法结构。抽象语法树中的每一个节点都表示源代码中的一个元素，每一颗子树都表示一个语法元素，例如一个 if else 语句，我们可以从 2 * 3 + 7 这一表达式中解析出下图所示的抽象语法树。

![æ½è±¡è¯­æ³æ ](http://c.biancheng.net/uploads/allimg/190903/4-1ZZ316360GM.gif)

#### 3) 指令集架构

最后要介绍的一个预备知识就是指令集的架构了，很多开发者都会遇到在生产环境运行的结果和本地不同的问题，导致这种情况的原因其实非常复杂，不同机器使用不同的指令就是可能的原因之一。



我们大多数开发者都会使用 x86_64 的 Macbook 作为工作上主要使用的硬件，在命令行中输入 uname -m 就能够获得当前机器上硬件的信息：

  x86_64 是目前比较常见的指令集架构之一，除了 x86_64 之外，还有其他类型的指令集架构，例如 amd64、arm64 以及 mips 等等，不同的处理器使用了大不相同的机器语言，所以很多编程语言为了在不同的机器上运行需要将源代码根据架构翻译成不同的机器代码。

复杂指令集计算机（CISC）和精简指令集计算机（RISC）是目前的两种 CPU 区别，它们的在设计理念上会有一些不同，从名字我们就能看出来这两种不同的设计有什么区别，复杂指令集通过增加指令的数量减少需要执行的质量数，而精简指令集能使用更少的指令完成目标的计算任务。早期的 CPU 为了减少机器语言指令的数量使用复杂指令集完成计算任务，这两者之前的区别其实就是设计上的权衡。  

## 编译原理

Go语言编译器的源代码在 cmd/compile 目录中，目录下的文件共同构成了Go语言的编译器，学过编译原理的人可能听说过编译器的前端和后端，编译器的前端一般承担着词法分析、语法分析、类型检查和中间代码生成几部分工作，而编译器后端主要负责目标代码的生成和优化，也就是将中间代码翻译成目标机器能够运行的机器码。

![img](http://c.biancheng.net/uploads/allimg/190903/4-1ZZ3155Q54H.gif)


Go的编译器在逻辑上可以被分成四个阶段：词法与语法分析、类型检查和 AST 转换、通用 SSA 生成和最后的机器代码生成，下面我们来分别介绍一下这四个阶段做的工作。

## 总结

Go语言的编译过程其实是非常有趣并且值得学习的，通过对Go语言四个编译阶段的分析和对编译器主函数的梳理，我们能够对 Golang 的实现有一些基本的理解，掌握编译的过程之后，Go语言对于我们来讲也不再是一个黑盒，所以学习其编译原理的过程还是非常让人着迷的。